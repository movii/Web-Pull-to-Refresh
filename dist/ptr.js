!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.PTR=e():t.PTR=e()}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var s={};return e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/dist/",e(e.s=0)}([function(t,e,s){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(){alert("refresh handler fires")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,s,n){return s&&t(e.prototype,s),n&&t(e,n),e}}(),a=s(1),r=(function(t){t&&t.__esModule}(a),s(2)),h=function(){function t(e){n(this,t),this.options=Object.assign({},t.defaults,e),this.state=t.states,this.distanceToRefresh=this.options.distanceToRefresh,this.init()}return o(t,[{key:"getElement",value:function(){return this.$contain=this.options.contain,this.$header=this.options.header,this.$content=this.options.content,this.$statusText=(0,r.$)(".status-text",this.$header),this.$statusArrow=(0,r.$)(".status-arrow",this.$header),this.$statusLoader=(0,r.$)(".status-loader",this.$header),this.$loadingContain=(0,r.$)(".loading",this.$header),this}},{key:"getClass",value:function(){return this.$containClass=this.$contain.classList,this}},{key:"getStyleObj",value:function(){return this.$headerStyles=this.$header.style,this.$contentStyles=this.$content.style,this}},{key:"init",value:function(){this.getElement().getClass().getStyleObj().addEvt(),(0,r.preventMobileChromeDefaultPullRefresh)()}},{key:"addEvt",value:function(){(0,r.addEvent)(this.$contain,"touchstart",this._touchstart.bind(this)),(0,r.addEvent)(this.$contain,"touchmove",this._touchmove.bind(this)),(0,r.addEvent)(this.$contain,"touchend",this._touchend.bind(this))}},{key:"removeEvt",value:function(){(0,r.removeEvent)(this.$contain,"touchstart",this._touchstart.bind(this)),(0,r.removeEvent)(this.$contain,"touchmove",this._touchmove.bind(this)),(0,r.removeEvent)(this.$contain,"touchend",this._touchend.bind(this))}},{key:"_touchstart",value:function(t){this.state.loading||(this.state.enable=0===this.$contain.scrollTop,this.state.startPos=t.touches[0].pageY)}},{key:"_touchmove",value:function(t){if(this.state.enable&&!this.state.loading){var e=t.changedTouches[0].pageY-this.state.startPos;e=this.state.distance=e>120?120:e,e<=20||window.scrollY<=0&&(e-window.scrollY<=this.distanceToRefresh?this.setStatusReady():this.setStatusPullDown(),this.handleTouchMove())}}},{key:"_touchend",value:function(){this.state.enable&&!this.state.loading&&(this.$containClass.contains("should-refresh")&&window.scrollY<=0?(this.state.loading=!0,this.setStatusLoad(),this.options&&this.options.refresher&&"function"==typeof this.options.refresher&&this.takeAction()):window.scrollY<=0?(this.handleTouchEnd(),this.reset()):this.reset())}},{key:"takeAction",value:function(){var t=this;return Promise.resolve(this.options.refresher(this.$statusText)).then(function(){return t.setStatusFinish().then(function(){return(0,r.delay)(850).then(function(){t.reset(),t.options.loading=!1})})})}},{key:"trigger",value:function(){if(!this.options.loading)return this.options.loading=!0,this.setStatusLoad(),this.takeAction().then(function(){return(0,r.delay)(50)})}},{key:"setStatusReady",value:function(){this.hideLoader(),this.rotateArrow(135),(0,r.style)(this.$header).set("transition",""),this.$containClass.remove("should-refresh"),this.$statusText.innerHTML=this.options.pullDownText}},{key:"setStatusPullDown",value:function(){this.rotateArrow(315),this.$containClass.add("should-refresh"),(0,r.style)(this.$header).set("transition",""),this.$statusText.innerHTML=this.options.releaseText}},{key:"setStatusLoad",value:function(){this.showLoader(),this.$statusText.innerHTML=this.options.refreshText,(0,r.style)(this.$content).set("transition","300ms"),(0,r.style)(this.$content).set("transform","translate3d(0, "+this.distanceToRefresh+"px, 0 )"),(0,r.style)(this.$header).set("transition","300ms"),(0,r.style)(this.$header).set("height",this.distanceToRefresh+"px"),(0,r.style)(this.$loadingContain).set("transition","300ms"),(0,r.style)(this.$loadingContain).set("height",this.distanceToRefresh+"px")}},{key:"setStatusFinish",value:function(){var t=this;return new Promise(function(e){(0,r.style)(t.$statusLoader).set("display","none"),(0,r.style)(t.$statusArrow).set("display","none");var s=(0,r.$)(".status-text",t.$header).innerHTML;s!==t.options.finishText&&s!==t.options.refreshText?t.$statusText.innerHTML=s:t.$statusText.innerHTML=t.options.finishText,e()})}},{key:"showLoader",value:function(){(0,r.style)(this.$statusLoader).set("display","block"),(0,r.style)(this.$statusArrow).set("display","none")}},{key:"hideLoader",value:function(){(0,r.style)(this.$statusLoader).set("display","none"),(0,r.style)(this.$statusArrow).set("display","block")}},{key:"rotateArrow",value:function(t){(0,r.style)(this.$statusArrow).set("transform","rotate("+t+"deg)")}},{key:"reset",value:function(){this.hideLoader(),(0,r.style)(this.$header).set("transition","130ms"),(0,r.style)(this.$content).set("transition","130ms"),(0,r.style)(this.$statusArrow).set("transform",""),(0,r.style)(this.$header).set("height",""),(0,r.style)(this.$header).set("transition",""),(0,r.style)(this.$loadingContain).set("height",""),(0,r.style)(this.$loadingContain).set("transition",""),(0,r.style)(this.$content).set("transform","translate3d(0, 0, 0 )"),(0,r.style)(this.$content).set("transform",""),(0,r.style)(this.$content).set("transition",""),this.state=Object.assign({},t.states),this.state.loading=!1}},{key:"handleTouchEnd",value:function(){(0,r.style)(this.$header).set("transition","330ms"),(0,r.style)(this.$content).set("transition","330ms"),(0,r.style)(this.$header).set("height",this.distanceToRefresh-this.$header.offsetHeight+"px"),(0,r.style)(this.$content).set("transform",""),(0,r.style)(this.$loadingContain).set("height",this.distanceToRefresh-this.$header.offsetHeight+"px")}},{key:"handleTouchMove",value:function(){(0,r.style)(this.$header).set("transition",""),(0,r.style)(this.$header).set("height",.7*this.state.distance+"px"),(0,r.style)(this.$content).set("transition",""),(0,r.style)(this.$content).set("transform","translate3d(0, "+.7*this.state.distance+"px, 0 )"),(0,r.style)(this.$loadingContain).set("transition",""),(0,r.style)(this.$loadingContain).set("height",.7*this.state.distance+"px")}}]),t}();h.defaults={contain:(0,r.$)(".ptr-wrapper"),header:(0,r.$)(".ptr-wrapper .ptr"),content:(0,r.$)(".ptr-wrapper .content"),distanceToRefresh:50,pullDownText:"Pull down",releaseText:"Release to refresh",refreshText:"Updating",finishText:"Done Refresh",refresher:i},h.states={enable:!1,startPos:0,distance:0,loading:!1},e.default=h},function(t,e){},function(t,e,s){"use strict";function n(t,e){return e?e.querySelector(t):document.querySelector(t)}function i(t){if(t)return{set:function(e,s){"transform"===e&&(t.style.WebkitTransform=s),t.style[e]=s}}}function o(t,e,s){t.addEventListener(e,s,{capture:!1,passive:!1})}function a(t,e,s){t.removeEventListener(e,s)}function r(){var t=0;o(document,"touchstart",function(e){t=e.touches[0].clientY}),o(document,"touchmove",function(e){window.pageYOffset<=0&&e.touches[0].clientY-t>0&&e.preventDefault()})}function h(t){return new Promise(function(e){return setTimeout(function(){e()},t)})}Object.defineProperty(e,"__esModule",{value:!0}),e.$=n,e.style=i,e.addEvent=o,e.removeEvent=a,e.preventMobileChromeDefaultPullRefresh=r,e.delay=h}]).default});